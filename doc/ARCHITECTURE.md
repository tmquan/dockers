# Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Unified LLM Deployment Suite                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          Entry Points                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  run_one.sh          run_all.sh         docker.py       measure.py  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€         â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€         â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  Quick test          Full suite         Manual CLI      Benchmark   â”‚
â”‚  Single combo        All combos         Operations      Standalone  â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚                 â”‚
                                    â–¼                 â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚     docker.py       â”‚  â”‚   measure.py     â”‚
                    â”‚  Deployment Manager â”‚  â”‚  Perf Measurementâ”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      BaseModelDeployer (ABC)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  Core Members:                                                        â”‚
â”‚    - method: str                    (hf/triton/nim/unim)            â”‚
â”‚    - model: str                     (HuggingFace model name)         â”‚
â”‚    - engine: str                    (vllm/sglang/trtllm/python)     â”‚
â”‚    - cache_dir: Path                (model cache location)           â”‚
â”‚    - container_name: str            (Docker container name)          â”‚
â”‚                                                                       â”‚
â”‚  Concrete Methods:                                                   â”‚
â”‚    - _get_default_cache_dir()       â†’ .cache/{method}/              â”‚
â”‚    - _validate_engine()             â†’ Check method+engine support   â”‚
â”‚    - start(), stop(), restart()     â†’ Container lifecycle           â”‚
â”‚    - status(), logs()               â†’ Container monitoring          â”‚
â”‚                                                                       â”‚
â”‚  Abstract Methods:                                                   â”‚
â”‚    - _generate_container_name()     â†’ Must implement in child       â”‚
â”‚    - _build_docker_command()        â†’ Must implement in child       â”‚
â”‚    - _get_health_endpoint()         â†’ Must implement in child       â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚               â”‚               â”‚               â”‚
                    â–¼               â–¼               â–¼               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ HFModelDeployer  â”‚ â”‚TritonModel   â”‚ â”‚NIMModel     â”‚ â”‚UNIMModel    â”‚
        â”‚                  â”‚ â”‚Deployer      â”‚ â”‚Deployer     â”‚ â”‚Deployer     â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ method: "hf"     â”‚ â”‚method:"triton"â”‚ â”‚method:"nim" â”‚ â”‚method:"unim"â”‚
        â”‚                  â”‚ â”‚              â”‚ â”‚             â”‚ â”‚             â”‚
        â”‚ Engines:         â”‚ â”‚ Engines:     â”‚ â”‚ Engines:    â”‚ â”‚ Engines:    â”‚
        â”‚  - vllm          â”‚ â”‚  - vllm      â”‚ â”‚  - vllm     â”‚ â”‚  - vllm     â”‚
        â”‚  - sglang        â”‚ â”‚  - python    â”‚ â”‚             â”‚ â”‚             â”‚
        â”‚  - trtllm        â”‚ â”‚  - trtllm    â”‚ â”‚             â”‚ â”‚             â”‚
        â”‚                  â”‚ â”‚              â”‚ â”‚             â”‚ â”‚             â”‚
        â”‚ Features:        â”‚ â”‚ Features:    â”‚ â”‚ Status:     â”‚ â”‚ Status:     â”‚
        â”‚  âœ… Direct       â”‚ â”‚  âœ… Model    â”‚ â”‚  ðŸš§ Planned â”‚ â”‚  ðŸš§ Planned â”‚
        â”‚  âœ… Fast setup   â”‚ â”‚     repo     â”‚ â”‚             â”‚ â”‚             â”‚
        â”‚  âœ… Simple       â”‚ â”‚  âœ… OpenAI   â”‚ â”‚             â”‚ â”‚             â”‚
        â”‚                  â”‚ â”‚     frontend â”‚ â”‚             â”‚ â”‚             â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Naming Convention                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  Containers:      {model_sanitized}-{method}-{engine}               â”‚
â”‚  Example:         qwen3-30b-a3b-thinking-2507-hf-vllm               â”‚
â”‚                                                                       â”‚
â”‚  Results:         benchmark_{model}_{method}_{engine}_{ts}.csv      â”‚
â”‚  Example:         benchmark_qwen3_30b_hf_vllm_20241213_143022.csv   â”‚
â”‚                                                                       â”‚
â”‚  Artifacts:       artifacts/{model}_{method}_{engine}/              â”‚
â”‚  Example:         artifacts/Qwen_Qwen3-30B_hf_vllm/                 â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Workflow Diagram                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  User Input                                                          â”‚
â”‚     â”‚                                                                 â”‚
â”‚     â”œâ”€â”€â”€â”€â”€â–º run_one.sh â”€â”€â”€â”€â”                                        â”‚
â”‚     â”‚                       â”‚                                        â”‚
â”‚     â”œâ”€â”€â”€â”€â”€â–º run_all.sh â”€â”€â”€â”€â”¤                                        â”‚
â”‚     â”‚                       â”‚                                        â”‚
â”‚     â””â”€â”€â”€â”€â”€â–º docker.py â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â–º create_deployer()                â”‚
â”‚                                         â”‚                            â”‚
â”‚                                         â”œâ”€â–º HFModelDeployer         â”‚
â”‚                                         â”œâ”€â–º TritonModelDeployer     â”‚
â”‚                                         â”œâ”€â–º NIMModelDeployer        â”‚
â”‚                                         â””â”€â–º UNIMModelDeployer       â”‚
â”‚                                                   â”‚                  â”‚
â”‚                                                   â–¼                  â”‚
â”‚                                         deployer.start()             â”‚
â”‚                                                   â”‚                  â”‚
â”‚                                                   â”œâ”€â–º Docker pull    â”‚
â”‚                                                   â”œâ”€â–º Container startâ”‚
â”‚                                                   â””â”€â–º Health check   â”‚
â”‚                                                   â”‚                  â”‚
â”‚                                                   â–¼                  â”‚
â”‚                                         Service Ready âœ…             â”‚
â”‚                                                   â”‚                  â”‚
â”‚                                                   â–¼                  â”‚
â”‚                                         measure.py                   â”‚
â”‚                                                   â”‚                  â”‚
â”‚                                                   â”œâ”€â–º GenAI-Perf    â”‚
â”‚                                                   â”œâ”€â–º Benchmark      â”‚
â”‚                                                   â””â”€â–º Export CSV     â”‚
â”‚                                                   â”‚                  â”‚
â”‚                                                   â–¼                  â”‚
â”‚                                         Results Saved ðŸ“Š             â”‚
â”‚                                                   â”‚                  â”‚
â”‚                                                   â–¼                  â”‚
â”‚                                         deployer.stop()              â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Configuration Hierarchy                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  Global Configs (docker.py)                                          â”‚
â”‚  â”œâ”€ Version configs          (VLLM_VERSION, TRITON_VERSION, ...)   â”‚
â”‚  â”œâ”€ Docker images            (VLLM_IMAGE, TRITON_VLLM_IMAGE, ...)  â”‚
â”‚  â”œâ”€ Default settings         (DEFAULT_PORT, DEFAULT_GPU_MEMORY, ...)â”‚
â”‚  â””â”€ Supported combinations   (SUPPORTED_ENGINES dict)               â”‚
â”‚                                                                       â”‚
â”‚  Benchmark Configs (measure.py)                                      â”‚
â”‚  â”œâ”€ Request settings         (DEFAULT_CONCURRENCY, ...)             â”‚
â”‚  â”œâ”€ Input/output params      (DEFAULT_INPUT_SEQUENCE_LENGTH, ...)  â”‚
â”‚  â””â”€ Measurement settings     (DEFAULT_MEASUREMENT_INTERVAL, ...)    â”‚
â”‚                                                                       â”‚
â”‚  Script Configs (run_*.sh)                                           â”‚
â”‚  â”œâ”€ Model selection          (MODEL variable)                        â”‚
â”‚  â”œâ”€ Method/engine arrays     (METHODS, METHOD_ENGINES)              â”‚
â”‚  â””â”€ Port mappings            (METHOD_BASE_PORT)                      â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          Data Flow                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  Input                          Processing                Output     â”‚
â”‚  â”€â”€â”€â”€â”€â”€                         â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                â”€â”€â”€â”€â”€â”€     â”‚
â”‚                                                                       â”‚
â”‚  Model Name  â”€â”€â”€â”€â”€â”€â”                                                 â”‚
â”‚  Method      â”€â”€â”€â”€â”€â”€â”¼â”€â”€â–º create_deployer() â”€â”€â–º BaseModelDeployer    â”‚
â”‚  Engine      â”€â”€â”€â”€â”€â”€â”˜           â”‚                     â”‚               â”‚
â”‚                                 â”‚                     â”‚               â”‚
â”‚                                 â”œâ”€â–º _validate_engine()â”‚               â”‚
â”‚                                 â”œâ”€â–º _get_cache_dir() â”‚               â”‚
â”‚                                 â””â”€â–º _generate_name() â”‚               â”‚
â”‚                                           â”‚           â”‚               â”‚
â”‚                                           â–¼           â”‚               â”‚
â”‚                                  Container Name â—„â”€â”€â”€â”€â”˜               â”‚
â”‚                                  {model}-{method}-{engine}           â”‚
â”‚                                           â”‚                           â”‚
â”‚                                           â–¼                           â”‚
â”‚                                  Docker Command                       â”‚
â”‚                                           â”‚                           â”‚
â”‚  Endpoint    â”€â”€â”€â”€â”€â”€â”                     â”‚                           â”‚
â”‚  Input params â”€â”€â”€â”€â”€â”¼â”€â”€â–º measure.py â—„â”€â”€â”€â”€â”˜                           â”‚
â”‚  Concurrency  â”€â”€â”€â”€â”€â”˜           â”‚                                     â”‚
â”‚                                 â”‚                                     â”‚
â”‚                                 â”œâ”€â–º GenAI-Perf                        â”‚
â”‚                                 â”œâ”€â–º Parse results                     â”‚
â”‚                                 â””â”€â–º Export CSV                        â”‚
â”‚                                           â”‚                           â”‚
â”‚                                           â–¼                           â”‚
â”‚                                  Results CSV                          â”‚
â”‚                                  benchmark_{model}_{method}_...csv   â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      File Organization                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  dockers/                                                            â”‚
â”‚  â”œâ”€â”€ Core Scripts                                                    â”‚
â”‚  â”‚   â”œâ”€â”€ docker.py              (1051 lines) Deployment manager      â”‚
â”‚  â”‚   â”œâ”€â”€ measure.py             (585 lines)  Performance tool        â”‚
â”‚  â”‚   â”œâ”€â”€ run_one.sh             (283 lines)  Single test            â”‚
â”‚  â”‚   â””â”€â”€ run_all.sh             (353 lines)  Full suite             â”‚
â”‚  â”‚                                                                    â”‚
â”‚  â”œâ”€â”€ Documentation                                                   â”‚
â”‚  â”‚   â”œâ”€â”€ README.md              Full documentation                   â”‚
â”‚  â”‚   â”œâ”€â”€ QUICK_REFERENCE.md     Command cheat sheet                 â”‚
â”‚  â”‚   â”œâ”€â”€ REFACTORING_SUMMARY.md This refactoring summary            â”‚
â”‚  â”‚   â””â”€â”€ ARCHITECTURE.md         This file                           â”‚
â”‚  â”‚                                                                    â”‚
â”‚  â”œâ”€â”€ Legacy (Keep for reference)                                    â”‚
â”‚  â”‚   â”œâ”€â”€ docker_hf.py           Original HF deployer                â”‚
â”‚  â”‚   â”œâ”€â”€ docker_hf_with_triton.py Original Triton deployer          â”‚
â”‚  â”‚   â”œâ”€â”€ run_benchmark.sh       Original HF benchmark               â”‚
â”‚  â”‚   â”œâ”€â”€ run_benchmark_with_triton.sh Original Triton benchmark     â”‚
â”‚  â”‚   â””â”€â”€ measure_perf.py        Original measurement tool           â”‚
â”‚  â”‚                                                                    â”‚
â”‚  â”œâ”€â”€ Cache (Auto-generated)                                          â”‚
â”‚  â”‚   â””â”€â”€ .cache/                                                     â”‚
â”‚  â”‚       â”œâ”€â”€ hf/                HuggingFace models                   â”‚
â”‚  â”‚       â”œâ”€â”€ triton/            Triton model repositories           â”‚
â”‚  â”‚       â”œâ”€â”€ nim/               NIM models (future)                  â”‚
â”‚  â”‚       â””â”€â”€ unim/              UNIM models (future)                 â”‚
â”‚  â”‚                                                                    â”‚
â”‚  â””â”€â”€ Results (Auto-generated)                                        â”‚
â”‚      â””â”€â”€ artifacts/                                                  â”‚
â”‚          â””â”€â”€ {model}_{method}_{engine}/  GenAI-Perf results         â”‚
â”‚              â”œâ”€â”€ profile_export.json                                 â”‚
â”‚              â””â”€â”€ *_genai_perf.csv                                    â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Key Design Principles

1. **Single Responsibility**: Each class has one clear purpose
2. **Open/Closed**: Easy to extend (new methods/engines) without modifying existing code
3. **Liskov Substitution**: All deployers can be used interchangeably through base class
4. **Interface Segregation**: Abstract methods are minimal and focused
5. **Dependency Inversion**: Depend on abstractions (BaseModelDeployer) not concretions

## Extension Points

### Adding a New Method
```python
class NewMethodDeployer(BaseModelDeployer):
    def __init__(self, model, engine, ...):
        super().__init__(
            method="newmethod",
            model=model,
            engine=engine,
            ...
        )
    
    def _generate_container_name(self) -> str:
        # Implement naming
        pass
    
    def _build_docker_command(self) -> str:
        # Implement Docker command
        pass
    
    def _get_health_endpoint(self) -> str:
        # Implement health check
        pass
```

### Adding a New Engine
1. Add to `SUPPORTED_ENGINES` dict
2. Implement `_build_{engine}_command()` in relevant deployers
3. Update documentation

### Adding Custom Metrics
1. Extend `_parse_genai_perf_output()` in `measure.py`
2. Add columns to CSV export
3. Update analysis examples

## Performance Considerations

- Parallel deployment safe (unique ports per test)
- Efficient caching (reuses downloaded models)
- Minimal resource duplication
- Clean container lifecycle management
- Comprehensive error handling

